(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"09GQ":function(t,e,i){"use strict";i.r(e),i.d(e,"TaskModule",(function(){return _}));var s=i("ofXK"),r=i("tyNb"),a=i("lDzL");class o{}var n=i("fXoL"),c=i("K3ix"),l=i("AytR"),b=i("tk/3"),u=i("JIr8"),d=i("vkgz");let h=(()=>{class t{constructor(t){this.http=t,this.baseURL=l.a.BaseURL,this.getMethod="get",this.postMethod="post",this.userListURL=this.baseURL+"listusers",this.taskCreateURL=this.baseURL+"create",this.taskUpdateURL=this.baseURL+"update",this.taskDeleteURL=this.baseURL+"delete",this.taskListURL=this.baseURL+"list"}apiCaller(t,e,i,s){return"get"===t?this.get(e):"post"===t?this.post(e,i):void 0}post(t,e){return this.http.post(t,e,{headers:this.getHeaders()}).pipe(Object(u.a)(this.handleError),Object(d.a)(t=>t))}get(t){return this.http.get(t,{headers:this.getHeaders()}).pipe(Object(u.a)(this.handleError),Object(d.a)(t=>t))}getHeaders(){return new b.c({"Access-Control-Allow-Origin":"*",accept:"application/json"}).append("AuthToken",l.a.AuthToken)}handleError(t){try{return t&&0===t.status?Promise.reject("No internet connection"):(Object(n.T)()&&console.log(t),Promise.reject(t&&t.status&&(401===t.status||403===t.status)?t:"error"+(t.error||t.message)))}catch(e){return Promise.reject("Something goes wrong,please try again later")}}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(b.a))},t.\u0275prov=n.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),p=(()=>{class t{constructor(t){this.apiService=t,this.users=[]}GetUserList(){return this.apiService.apiCaller(this.apiService.getMethod,this.apiService.userListURL)}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(h))},t.\u0275prov=n.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),g=(()=>{class t{constructor(t){this.apiService=t}GetTaskList(){return this.apiService.apiCaller(this.apiService.getMethod,this.apiService.taskListURL)}CreateTask(t){return this.apiService.apiCaller(this.apiService.postMethod,this.apiService.taskCreateURL,t)}UpdateTask(t){return this.apiService.apiCaller(this.apiService.postMethod,this.apiService.taskUpdateURL,t)}DeleteTask(t){return this.apiService.apiCaller(this.apiService.postMethod,this.apiService.taskDeleteURL,t)}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(h))},t.\u0275prov=n.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=i("5eHb"),m=i("cxgq");let f=(()=>{class t{constructor(t,e){this.toaster=t,this.loaderService=e,this.success="success",this.error="error",this.warning="warning",this.modalConfig={keyboard:!0,class:"modal-lg modal-dialog-centered",animated:!0}}ShowMsg(t,e){e===this.success?this.toaster.success(t):e===this.error?this.toaster.error(t):e===this.warning&&this.toaster.warning(t)}ShowPageLoader(){this.loaderService.show()}HidePageLoader(){this.loaderService.hide()}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(v.b),n.Sb(m.a))},t.\u0275prov=n.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var k=i("3Pt+"),S=i("hzby");const y=["f"];function w(t,e){1&t&&(n.Ob(0,"div",10),n.vc(1,"Task message required"),n.Nb())}function O(t,e){1&t&&(n.Ob(0,"div",10),n.vc(1,"min length must be 5 characters"),n.Nb())}function L(t,e){if(1&t&&(n.Ob(0,"div"),n.tc(1,w,2,0,"div",21),n.tc(2,O,2,0,"div",21),n.Nb()),2&t){n.Xb();const t=n.jc(17);n.xb(1),n.cc("ngIf",t.errors.required),n.xb(1),n.cc("ngIf",t.errors.minlength)}}function N(t,e){if(1&t&&(n.Ob(0,"option",22),n.Ob(1,"span",23),n.vc(2),n.Nb(),n.Nb()),2&t){const t=e.$implicit;n.cc("value",t.id),n.xb(2),n.wc(t.name)}}function x(t,e){if(1&t&&(n.Ob(0,"option",22),n.vc(1),n.Nb()),2&t){const t=e.$implicit;n.cc("value",t.id),n.xb(1),n.wc(t.name)}}let M=(()=>{class t{constructor(t,e,i,s){this.bsModalRef=t,this.userService=e,this.taskService=i,this.utilityService=s,this.task=new o,this.title="",this.userList=[],this.priorityList=[{id:1,name:"Normal"},{id:2,name:"Mid"},{id:3,name:"High"}],this.bsValue=new Date,this.minDate=new Date}ngOnInit(){this.GetUserList(),setTimeout(()=>{this.task.due_date&&(this.bsValue=new Date(this.task.due_date))},1e3)}GetUserList(){this.userService.users&&this.userService.users.length>0?this.userList=this.userService.users:(this.utilityService.ShowPageLoader(),this.userService.GetUserList().subscribe(t=>{this.utilityService.HidePageLoader(),t.status===this.utilityService.success?(this.userList=t.users,this.userService.users=this.userList):this.utilityService.ShowMsg(t.message,this.utilityService.error)}))}onSubmit(){if(this.form.valid){let t=new FormData;t.append("message",this.task.message),t.append("priority",this.task.priority),t.append("assigned_to",this.task.assigned_to),this.bsValue&&t.append("due_date",this.FormatDate(this.bsValue)),this.task.id?(t.append("taskid",this.task.id),this.UpdateTask(t)):this.SaveTask(t)}}SaveTask(t){this.utilityService.ShowPageLoader(),this.taskService.CreateTask(t).subscribe(t=>{this.utilityService.HidePageLoader(),t.status===this.utilityService.success?(this.utilityService.ShowMsg("Task added successfully",this.utilityService.success),this.bsModalRef.hide(),this.bsModalRef.onHidden.next(!0)):this.utilityService.ShowMsg(t.message,this.utilityService.error)})}UpdateTask(t){this.utilityService.ShowPageLoader(),this.taskService.UpdateTask(t).subscribe(t=>{this.utilityService.HidePageLoader(),t.status===this.utilityService.success?(this.utilityService.ShowMsg("Task updated successfully",this.utilityService.success),this.bsModalRef.hide(),this.bsModalRef.onHidden.next(!0)):this.utilityService.ShowMsg(t.message,this.utilityService.error)})}FormatDate(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}}return t.\u0275fac=function(e){return new(e||t)(n.Jb(c.a),n.Jb(p),n.Jb(g),n.Jb(f))},t.\u0275cmp=n.Db({type:t,selectors:[["app-addtask"]],viewQuery:function(t,e){var i;1&t&&n.zc(y,!0),2&t&&n.ic(i=n.Wb())&&(e.form=i.first)},decls:41,vars:11,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],["name","taskForm","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"row"],[1,"col-md-12"],[1,"form-group"],[1,"text-danger"],["type","text","name","message","placeholder","Enter Message","minlength","5","maxlength","50","required","",1,"form-control",3,"ngModel","ngModelChange"],["message","ngModel"],[4,"ngIf"],["name","assigned_to","placeholder","Select a user",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","bsDatepicker","","name","due_date","placeholder","Enter due date",1,"form-control",3,"bsValue","ngModel","ngModelChange"],["name","priority","placeholder","Select a priority",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-default","btn-primary",3,"disabled","click"],["class","text-danger",4,"ngIf"],[3,"value"],[1,"miniImg"]],template:function(t,e){if(1&t){const t=n.Pb();n.Ob(0,"div",0),n.Ob(1,"h4",1),n.vc(2),n.Nb(),n.Ob(3,"button",2),n.Vb("click",(function(){return e.bsModalRef.hide()})),n.Ob(4,"span",3),n.vc(5,"\xd7"),n.Nb(),n.Nb(),n.Nb(),n.Ob(6,"div",4),n.Ob(7,"form",5,6),n.Vb("ngSubmit",(function(){return n.lc(t),n.jc(8).taskForm.valid&&e.onSubmit()})),n.Ob(9,"div",7),n.Ob(10,"div",8),n.Ob(11,"div",9),n.Ob(12,"label"),n.vc(13,"Task Message "),n.Ob(14,"span",10),n.vc(15,"*"),n.Nb(),n.Nb(),n.Ob(16,"input",11,12),n.Vb("ngModelChange",(function(t){return e.task.message=t})),n.Nb(),n.tc(18,L,3,2,"div",13),n.Nb(),n.Nb(),n.Ob(19,"div",8),n.Ob(20,"div",9),n.Ob(21,"label"),n.vc(22,"Assigned to"),n.Nb(),n.Ob(23,"select",14),n.Vb("ngModelChange",(function(t){return e.task.assigned_to=t})),n.tc(24,N,3,2,"option",15),n.Nb(),n.Nb(),n.Nb(),n.Ob(25,"div",8),n.Ob(26,"div",9),n.Ob(27,"label"),n.vc(28,"Due Date"),n.Nb(),n.Ob(29,"input",16),n.Vb("ngModelChange",(function(t){return e.bsValue=t})),n.Nb(),n.Nb(),n.Nb(),n.Ob(30,"div",8),n.Ob(31,"div",9),n.Ob(32,"label"),n.vc(33,"Priority"),n.Nb(),n.Ob(34,"select",17),n.Vb("ngModelChange",(function(t){return e.task.priority=t})),n.tc(35,x,2,2,"option",15),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Ob(36,"div",18),n.Ob(37,"button",19),n.Vb("click",(function(){return e.bsModalRef.hide()})),n.vc(38,"Close"),n.Nb(),n.Ob(39,"button",20),n.Vb("click",(function(){return e.onSubmit()})),n.vc(40),n.Nb(),n.Nb()}if(2&t){const t=n.jc(17);n.xb(2),n.wc(e.title),n.xb(14),n.cc("ngModel",e.task.message),n.xb(2),n.cc("ngIf",t.errors&&t.touched),n.xb(5),n.cc("ngModel",e.task.assigned_to),n.xb(1),n.cc("ngForOf",e.userList),n.xb(5),n.cc("bsValue",e.bsValue)("ngModel",e.bsValue),n.xb(5),n.cc("ngModel",e.task.priority),n.xb(1),n.cc("ngForOf",e.priorityList),n.xb(4),n.cc("disabled",!e.task.message),n.xb(1),n.wc(e.task.taskid?"Update":"Save")}},directives:[k.o,k.h,k.i,k.a,k.d,k.c,k.l,k.g,k.j,s.l,k.m,s.k,S.b,S.a,k.k,k.n],styles:[".miniImg[_ngcontent-%COMP%]{height:20px;width:20px;display:inline-block}"]}),t})();function T(t,e){if(1&t&&(n.Ob(0,"option",22),n.vc(1),n.Nb()),2&t){const t=e.$implicit;n.cc("value",t.id),n.xb(1),n.wc(t.name)}}function D(t,e){1&t&&n.vc(0),2&t&&n.xc(" ",e.row.message," ")}function R(t,e){1&t&&n.vc(0),2&t&&n.xc(" ",e.row.assigned_name," ")}function C(t,e){1&t&&(n.vc(0),n.Yb(1,"date")),2&t&&n.xc(" ",n.Zb(1,1,e.row.created_on)," ")}function U(t,e){1&t&&(n.vc(0),n.Yb(1,"date")),2&t&&n.xc(" ",n.Zb(1,1,e.row.due_date)," ")}function P(t,e){1&t&&n.vc(0),2&t&&n.xc(" ",e.row.priorityname," ")}function F(t,e){if(1&t){const t=n.Pb();n.Ob(0,"a",23),n.Vb("click",(function(){n.lc(t);const i=e.row;return n.Xb().EditTask(i)})),n.Kb(1,"i",24),n.Nb(),n.Ob(2,"a",23),n.Vb("click",(function(){n.lc(t);const i=e.row,s=n.Xb(),r=n.jc(37);return s.DeleteTask(i.id,r)})),n.Kb(3,"i",25),n.Nb()}}function H(t,e){if(1&t){const t=n.Pb();n.Ob(0,"div",26),n.Ob(1,"p"),n.vc(2,"Are you sure to delete the task '"),n.Ob(3,"b"),n.vc(4),n.Nb(),n.vc(5,"' ?"),n.Nb(),n.Ob(6,"button",27),n.Vb("click",(function(){return n.lc(t),n.Xb().ConfirmDelete()})),n.vc(7,"Yes"),n.Nb(),n.Ob(8,"button",28),n.Vb("click",(function(){return n.lc(t),n.Xb().DeclineDelete()})),n.vc(9,"Cancel"),n.Nb(),n.Nb()}if(2&t){const t=n.Xb();n.xb(4),n.wc(t.toDeleteTaskname)}}const I=[{path:"",component:(()=>{class t{constructor(t,e,i,s){this.taskService=t,this.utilityService=e,this.modalService=i,this.userService=s,this.taskList=[],this.toDeleteId="",this.toDeleteTaskname="",this.userList=[],this.rows=[],this.loadingIndicator=!0,this.reorderable=!0,this.columns=[{prop:"assigned_name"},{prop:"due_date"},{prop:"message"},{prop:"created_on"},{prop:"due_date"},{prop:"priority"}],this.ColumnMode=a.a}ngOnInit(){this.GetTaskList(),this.GetUserList()}GetTaskList(){this.utilityService.ShowPageLoader(),this.taskService.GetTaskList().subscribe(t=>{this.utilityService.HidePageLoader(),t.status===this.utilityService.success?(this.taskList=t.tasks,this.taskList.forEach(t=>{"1"===t.priority&&(t.priorityname="Normal"),"2"===t.priority&&(t.priorityname="Mid"),"3"===t.priority&&(t.priorityname="High")}),this.rows=this.taskList,console.log(this.taskList)):this.utilityService.ShowMsg(t.message,this.utilityService.error)})}GetUserList(){this.userService.users&&this.userService.users.length>0?this.userList=this.userService.users:(this.utilityService.ShowPageLoader(),this.userService.GetUserList().subscribe(t=>{this.utilityService.HidePageLoader(),t.status===this.utilityService.success?(this.userList=t.users,this.userService.users=this.userList):this.utilityService.ShowMsg(t.message,this.utilityService.error)}))}EditTask(t){this.modalRef=this.modalService.show(M,{class:"modal-md",backdrop:"static"}),this.modalRef.content.title="Edit task",this.modalRef.content.task=t,this.modalRef.onHidden.subscribe(t=>{!0===t&&this.GetTaskList()})}AddTask(){this.modalRef=this.modalService.show(M,{class:"modal-md",backdrop:"static"}),this.modalRef.content.title="Add new task",this.modalRef.onHidden.subscribe(t=>{!0===t&&this.GetTaskList()})}DeleteTask(t,e){this.modalRef=this.modalService.show(e,{class:"modal-md"}),this.toDeleteId=t,this.toDeleteTaskname=this.taskList.filter(e=>e.id===t)[0].message}ConfirmDelete(){if(this.toDeleteId){let t=new FormData;t.append("taskid",this.toDeleteId),this.taskService.DeleteTask(t).subscribe(t=>{t.status===this.utilityService.success?(this.utilityService.ShowMsg("Task deleted successfully",this.utilityService.success),this.GetTaskList()):this.utilityService.ShowMsg(t.message,this.utilityService.error),this.toDeleteTaskname=""})}else this.utilityService.ShowMsg("Id is missing",this.utilityService.error);this.modalRef.hide()}DeclineDelete(){this.toDeleteId="",this.modalRef.hide()}updateFilter(t){const e=t.target.value.toLowerCase(),i=this.taskList.filter(t=>-1!==t.message.toLowerCase().indexOf(e)||!e);this.rows=i,this.rows=e?this.rows:this.taskList,this.table.offset=0}FilterByPriority(t){const e=t.target.value,i=this.taskList.filter((function(t){return-1!==t.priority.indexOf(e)||!e}));this.rows=i,this.rows=e?this.rows:this.taskList,this.table.offset=0}FilterByUser(t){const e=t.target.value,i=this.taskList.filter((function(t){return-1!==t.assigned_to.indexOf(e)||!e}));this.rows=i,this.rows=e?this.rows:this.taskList,this.table.offset=0}}return t.\u0275fac=function(e){return new(e||t)(n.Jb(g),n.Jb(f),n.Jb(c.b),n.Jb(p))},t.\u0275cmp=n.Db({type:t,selectors:[["app-tasklist"]],viewQuery:function(t,e){var i;1&t&&n.zc(a.d,!0),2&t&&n.ic(i=n.Wb())&&(e.table=i.first)},decls:38,vars:9,consts:[[1,"container"],[1,"row"],[1,"col-md-3"],["type","text","placeholder","Filter by task message",1,"form-control",3,"keyup"],["placeholder","Filter a user",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","Filter a priority",1,"form-control",3,"change"],["value","1"],["value","2"],["value","3"],["type","button",1,"btn","btn-primary","btn-md","pull-right","mb-2",3,"click"],[1,"material",2,"text-align","center",3,"rows","limit","columnMode","headerHeight","footerHeight","externalPaging","rowHeight","reorderable"],["table",""],["name","TASK"],["ngx-datatable-cell-template",""],["name","ASSIGNED TO"],["name","ASSIGNED DATE"],["name","DUE DATE"],["name","PRIORITY"],["name","ACTION"],["template",""],[3,"value"],[1,"actionButton",3,"click"],[1,"fa","fa-pencil","text-primary"],[1,"fa","fa-trash","text-danger"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-danger","pull-right",3,"click"],["type","button",1,"btn","pull-right","ml-2",3,"click"]],template:function(t,e){1&t&&(n.Ob(0,"div",0),n.Ob(1,"div",1),n.Ob(2,"div",2),n.Ob(3,"input",3),n.Vb("keyup",(function(t){return e.updateFilter(t)})),n.Nb(),n.Nb(),n.Ob(4,"div",2),n.Ob(5,"select",4),n.Vb("change",(function(t){return e.FilterByUser(t)})),n.Ob(6,"option",5),n.vc(7,"All user"),n.Nb(),n.tc(8,T,2,2,"option",6),n.Nb(),n.Nb(),n.Ob(9,"div",2),n.Ob(10,"select",7),n.Vb("change",(function(t){return e.FilterByPriority(t)})),n.Ob(11,"option",5),n.vc(12,"All priority"),n.Nb(),n.Ob(13,"option",8),n.vc(14,"Normal"),n.Nb(),n.Ob(15,"option",9),n.vc(16,"Mid"),n.Nb(),n.Ob(17,"option",10),n.vc(18,"High"),n.Nb(),n.Nb(),n.Nb(),n.Ob(19,"div",2),n.Ob(20,"button",11),n.Vb("click",(function(){return e.AddTask()})),n.vc(21,"Add task"),n.Nb(),n.Nb(),n.Nb(),n.Ob(22,"ngx-datatable",12,13),n.Ob(24,"ngx-datatable-column",14),n.tc(25,D,1,1,"ng-template",15),n.Nb(),n.Ob(26,"ngx-datatable-column",16),n.tc(27,R,1,1,"ng-template",15),n.Nb(),n.Ob(28,"ngx-datatable-column",17),n.tc(29,C,2,3,"ng-template",15),n.Nb(),n.Ob(30,"ngx-datatable-column",18),n.tc(31,U,2,3,"ng-template",15),n.Nb(),n.Ob(32,"ngx-datatable-column",19),n.tc(33,P,1,1,"ng-template",15),n.Nb(),n.Ob(34,"ngx-datatable-column",20),n.tc(35,F,4,0,"ng-template",15),n.Nb(),n.Nb(),n.Nb(),n.tc(36,H,10,1,"ng-template",null,21,n.uc)),2&t&&(n.xb(8),n.cc("ngForOf",e.userList),n.xb(14),n.cc("rows",e.rows)("limit",8)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!1)("rowHeight","auto")("reorderable",e.reorderable))},directives:[k.k,k.n,s.k,a.d,a.c,a.b],pipes:[s.e],styles:[".actionButton[_ngcontent-%COMP%]{font-size:15px;padding:5px;cursor:pointer;margin-right:15px}.datatable-header-cell-template-wrap[_ngcontent-%COMP%]{text-align:center}.page-count[_ngcontent-%COMP%]{text-align:right}"]}),t})()}];let V=(()=>{class t{}return t.\u0275mod=n.Hb({type:t}),t.\u0275inj=n.Gb({factory:function(e){return new(e||t)},imports:[[r.a.forChild(I)],r.a]}),t})(),_=(()=>{class t{}return t.\u0275mod=n.Hb({type:t}),t.\u0275inj=n.Gb({factory:function(e){return new(e||t)},imports:[[s.c,V,a.e,k.b,S.c.forRoot()]]}),t})()}}]);